---
name: chisqassoc
title: Measures of Association and Effect Sizes
menuGroup: Chi² Tools
menuTitle: Association & Effect Sizes
version: '1.0.0'
jas: '1.2'
description:
    main: |
        Comprehensive measures of categorical association organised by statistical foundation.
        
        Provides:
        - Chi-square-based measures (Phi, Cramér's V, Cohen's w, W-hat, etc.)
        - Margin-free measures (Yule's Q, Y, Odds Ratios)
        - PRE measures (Goodman-Kruskal Lambda and Tau)
        - Confidence intervals where available
        - Effect size interpretation with table-specific thresholds
        - Chi-square-maximising table
        - Standardised contingency table
        
        Effect sizes are assessed using Cohen (1988) thresholds adjusted for 
        table size and maximum achievable values where applicable.
        
    R:
        dontrun: false
        usage: |
            # Example with Titanic data
            data('Titanic')
            titanic_df <- as.data.frame(Titanic)
            titanic_expanded <- titanic_df[rep(seq_len(nrow(titanic_df)), 
                                               titanic_df$Freq), 1:4]
            
            chisqassoc(
                data = titanic_expanded,
                rows = 'Class',
                cols = 'Survived',
                cramersV = TRUE,
                yulesQ = TRUE,
                gkLambda = TRUE
            )

completeWhenFilled: true

options:
    - name: data
      type: Data
      description:
          R: the data as a data frame

    - name: rows
      title: Row Variable
      type: Variable
      suggested:
        - nominal
        - ordinal
      permitted:
        - factor
      description:
          R: >
            a string naming the variable for rows in the contingency table
            (must be a factor)

    - name: cols
      title: Column Variable
      type: Variable
      suggested:
        - nominal
        - ordinal
      permitted:
        - factor
      description:
          R: >
            a string naming the variable for columns in the contingency table
            (must be a factor)

    - name: counts
      title: Counts (optional)
      type: Variable
      suggested:
        - continuous
      description:
          R: >
            optional variable containing frequency counts for wide-format data.
            If not provided, data are assumed to be in long format (one row per case).

    # Chi-square-based measures
    - name: phi
      title: Phi (2×2 only)
      type: Bool
      default: false
      description:
          R: >
            TRUE or FALSE (default), compute Phi coefficient for 2×2 tables

    - name: phiSigned
      title: Phi signed (2×2 only)
      type: Bool
      default: false
      description:
          R: >
            TRUE or FALSE (default), compute signed Phi coefficient for 2×2 tables

    - name: phiCorrected
      title: Phi corrected (2×2 only)
      type: Bool
      default: false
      description:
          R: >
            TRUE or FALSE (default), compute corrected Phi coefficient for 2×2 tables

    - name: coleC7
      title: Cole's C7 (2×2 only)
      type: Bool
      default: false
      description:
          R: >
            TRUE or FALSE (default), compute Cole's C7 coefficient with Ratliff's (1982)
            correction for 2×2 tables. A margin-free measure that normalises the cross-product
            difference by its maximum achievable value given the marginals.

    - name: zysnoPhi
      title: Zysno's φ* (2×2 only)
      type: Bool
      default: false
      description:
          R: >
            TRUE or FALSE (default), compute Zysno's (1997) phi-star coefficient for 2×2 tables.
            A margin-free measure that reduces phi's dependence on marginal distributions
            while retaining sensitivity to association strength.

    - name: contingencyC
      title: Contingency Coefficient C
      type: Bool
      default: false
      description:
          R: >
            TRUE or FALSE (default), compute contingency coefficient C

    - name: cAdjusted
      title: C adjusted
      type: Bool
      default: false
      description:
          R: >
            TRUE or FALSE (default), compute adjusted contingency coefficient C

    - name: cCorrected
      title: C corrected
      type: Bool
      default: false
      description:
          R: >
            TRUE or FALSE (default), compute maximum-corrected contingency coefficient C

    - name: cramersV
      title: Cramér's V
      type: Bool
      default: true
      description:
          R: >
            TRUE (default) or FALSE, compute Cramér's V with confidence interval

    - name: vCorrected
      title: Cramér's V corrected
      type: Bool
      default: false
      description:
          R: >
            TRUE or FALSE (default), compute maximum-corrected Cramér's V

    - name: vStandardised
      title: Cramér's V standardised
      type: Bool
      default: false
      description:
          R: >
            TRUE or FALSE (default), compute Cramér's V on standardised table

    - name: vBiasCorrected
      title: Cramér's V bias-corrected
      type: Bool
      default: false
      description:
          R: >
            TRUE or FALSE (default), compute bias-corrected Cramér's V

    - name: cohenW
      title: Cohen's w
      type: Bool
      default: false
      description:
          R: >
            TRUE or FALSE (default), compute Cohen's w

    - name: wHat
      title: W-hat coefficient
      type: Bool
      default: false
      description:
          R: >
            TRUE or FALSE (default), compute W-hat coefficient with confidence interval

    - name: wHatCorrected
      title: W-hat corrected
      type: Bool
      default: false
      description:
          R: >
            TRUE or FALSE (default), compute maximum-corrected W-hat coefficient.
            Corrects for the maximum achievable value in tables with asymmetric marginals.

    - name: sakoda
      title: Sakoda's D Global
      type: Bool
      default: false
      description:
          R: >
            TRUE or FALSE (default), Sakoda's generalized index of dissimilarity (D_G),
            a global measure of association representing the proportion of cases
            needing redistribution to achieve independence.

    - name: sakodaCorrected
      title: Sakoda's D Global corrected
      type: Bool
      default: false
      description:
          R: >
            TRUE or FALSE (default), compute maximum-corrected Sakoda's D Global.
            Corrects for the maximum achievable value in tables with asymmetric marginals.

    - name: sakodaLocal
      title: Sakoda's D Local / PEM
      type: Bool
      default: false
      description:
          R: >
            TRUE or FALSE (default), Sakoda's cell-level index of dissimilarity (D_ij),
            mathematically equivalent to Cibois's PEM (Percentage of Maximum deviation).
            Displays a table of local association values without confidence intervals.
            For bootstrap CIs, use the Post-hoc Analysis facility.
    
    - name: marginFree
      title: Margin-Free Measures (OR, Q, Y)
      type: Bool
      default: false
      description:
          R: >
            TRUE or FALSE (default), compute margin-free measures: Odds Ratio, 
            Yule's Q, and Yule's Y. For 2×2 tables: single values appear in the 
            summary table. For larger tables: pairwise comparisons in separate tables.

    - name: rowRef
      title: Row category of interest (OR)
      type: Level
      variable: (rows)
      description:
          ui: Select the row category to use as the category of interest for odds ratio calculation.
          R: The row level selected as the category of interest.

    - name: colRef
      title: Column category of interest (OR)
      type: Level
      variable: (cols)
      description:
          ui: Select the column category to use as the category of interest for odds ratio calculation.
          R: The column level selected as the category of interest.

    # PRE measures
    - name: gkLambda
      title: Goodman-Kruskal Lambda
      type: Bool
      default: false
      description:
          R: >
            TRUE or FALSE (default), compute Goodman-Kruskal Lambda (asymmetric and symmetric)
            with confidence intervals

    - name: gkLambdaCorrected
      title: Goodman-Kruskal Lambda corrected
      type: Bool
      default: false
      description:
          R: >
            TRUE or FALSE (default), compute corrected Goodman-Kruskal Lambda

    - name: gkTau
      title: Goodman-Kruskal Tau
      type: Bool
      default: false
      description:
          R: >
            TRUE or FALSE (default), compute Goodman-Kruskal Tau (asymmetric)
            with confidence interval

    # Computation parameters (these break the Bool grouping)
    - name: confLevel
      title: Confidence Level
      type: Number
      min: 50
      max: 99.9
      default: 95
      description:
          R: >
            confidence level as a percentage (default: 95)

    - name: bootstrapReps
      title: Bootstrap Replications
      type: Integer
      min: 100
      max: 10000
      default: 999
      description:
          R: >
            number of bootstrap replications for computing confidence intervals.
            Applies to: Phi corrected, C adjusted, C corrected, V corrected,
            W-hat, W-hat corrected, Sakoda's D, and Sakoda's D corrected.
            Default: 999. See table annotation for details.

    - name: seed
      title: Random Seed
      type: Integer
      min: 1
      max: 999999
      default: 123
      description:
          R: >
            random seed for reproducibility (default: 123)

    # Display options (will form separate LayoutBox automatically)
    - name: showChisqMax
      title: Show chi-squared-maximising table
      type: Bool
      default: false
      description:
          R: >
            TRUE or FALSE (default), display the chi-square-maximising table

    - name: showStandardised
      title: Show standardised table
      type: Bool
      default: false
      description:
          R: >
            TRUE or FALSE (default), display the standardised contingency table

    - name: showThresholds
      title: Show effect size threshold table
      type: Bool
      default: false
      description:
          R: >
            TRUE or FALSE (default), display effect size interpretation thresholds

    - name: showMethodInfo
      title: Show detailed method explanations
      type: Bool
      default: false
      description:
          R: >
            TRUE or FALSE (default), display detailed methodological explanations
            for selected measures
...